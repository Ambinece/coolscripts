local UIS = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game.CoreGui
local Players = game:GetService("Players")
local Player = Players.LocalPlayer

local Screen = Instance.new("ScreenGui")
local Button = Instance.new("TextButton")

Screen.Parent = CoreGui

Button.Parent = Screen
Button.Size = UDim2.new(0, 100, 0, 50)
Button.BackgroundColor3 = Color3.new(255/255, 204/255, 204/255)
Button.Position = UDim2.new(0.5, -50, 0.5, -25)
Button.Text = "Spam: OFF"
Button.TextScaled = true

local isSpamming = false
local spamCoroutine

local function spamRob()
    while isSpamming do
        local robRemote = ReplicatedStorage:FindFirstChild("rob")
        if robRemote then
            robRemote:FireServer()
        else
            warn("Remote 'rob' not found/You don't have rob equipped")
        end
        wait(0.1)
    end
end

local function toggleSpam()
    isSpamming = not isSpamming
    if isSpamming then
        Button.BackgroundColor3 = Color3.new(204/255, 255/255, 204/255)
        Button.Text = "Spam: ON"
        spamCoroutine = coroutine.create(spamRob)
        coroutine.resume(spamCoroutine)
    else
        Button.BackgroundColor3 = Color3.new(255/255, 204/255, 204/255)
        Button.Text = "Spam: OFF"
        spamCoroutine = nil
    end
end

UIS.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.R then
        toggleSpam()
    end
end)

Button.MouseButton1Click:Connect(toggleSpam)

local function setupRespawnHandling()
    isSpamming = false
    if spamCoroutine then
        spamCoroutine = nil
    end
    Button.BackgroundColor3 = Color3.new(255/255, 204/255, 204/255)
    Button.Text = "Spam: OFF"

    local character = Player.Character or Player.CharacterAdded:Wait()
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = 35
    end
end



Player.CharacterAdded:Connect(setupRespawnHandling)
setupRespawnHandling()

-- hopefully i was able to get a fix out
